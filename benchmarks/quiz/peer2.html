

<!DOCTYPE html>
<html>
<head>

  <!-- Open this webpage in a different browser than benchmark/quiz/index.html -->
  <!-- You have to change the orbitAddress down at the botton (/orbit/Qm.../quizes) -->
  <!-- to the one shown in index.html -->
  <!-- Note: Firefox in privacy mode does not work -->

  <meta charset="utf-8">
  <title>CCM Benchmark Quiz Peer 2</title>
  <!-- Dependencies for now -->
  <script src="../../lib/ipfs-0.28.2.js"></script>
  <script src="../../lib/orbitdb-0.19.7.js"></script>

  <!-- Load source files starting here -->
  <script src="../../src/ccm.js"></script>
  <script src="../../src/orbit-ccm.js"></script>
  <script src="ccm.quiz.js"></script>
  <style>

    #container {
      width: 1300px;
      margin: auto;
    }
    #messages {
      background: black;
      color: white;
      font-size: large;
      margin-top: 20px;
      padding: 5px 0px 5px 10px;
      min-height: 200px;
      max-height: 350px;
      overflow-y: scroll;
    }

    #messages pre {
      margin: 0px;
    }

    #mocha-stats {
      position: absolute;
    }
  </style>
</head>
<body>
  <div id="container">

    <div id="content">

      <div id="messages">

      </div>

      <div id="component">

      </div>

    </div>
  </div>

  <script>
    window.LOG="debug";
    let quizConfig = {
      "css": [ "ccm.load", "https://ccmjs.github.io/akless-components/quiz/resources/weblysleek.css", { "context": "head", "url": "https://ccmjs.github.io/akless-components/libs/weblysleekui/font.css" } ],
      "feedback": true,
      "navigation": true,
      "placeholder.finish": "Restart",
      "onfinish": { "restart": true },
      "root": document.getElementById("component")
    }

    function render () {
      ccm.start('quiz', quizConfig)
    }

    function getStore() {
      ccm.dstore({store: 'se2.lec03.quizes'}, function (quizes) {

        window.quizes = quizes;
        // setTimeout(getQuestions, 2000)
      })
    }

    function getQuestions() {
      let doc = window.quizes.get('patterns')
      console.debug(doc)

      quizConfig.questions = doc.questions;

      setTimeout(render, 2000)
    }

    ccm.dstore()

    setTimeout(getStore, 20000)
    // ccm.dstore({ store: "se2.lec03.quizes" }, function (store) {

      // const patternQuestions = store.get('patterns')

      // console.log(`Fetched document patterns`, patternQuestions)
      // quizConfig.questions = patternQuestions;

      // render()
    // })

  </script>
</body>
</html>
